{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "dev:up",
      "type": "shell",
      "command": "./scripts/start-dev.sh",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": [],
      "detail": "Start frontend and backend with hot reload"
    },
    {
      "label": "dev:backend",
      "type": "shell",
      "command": "./scripts/dev-backend.sh",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": ["$go"],
      "detail": "Start backend only with hot reload"
    },
    {
      "label": "dev:frontend",
      "type": "shell",
      "command": "./scripts/dev-frontend.sh",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "detail": "Start frontend only with HMR"
    },
    {
      "label": "dev:logs",
      "type": "shell",
      "command": "docker compose -f docker-compose.dev.yml logs -f",
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "detail": "View Docker compose logs"
    },
    {
      "label": "dev:down",
      "type": "shell",
      "command": "docker compose -f docker-compose.dev.yml down",
      "group": "none",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": [],
      "detail": "Stop Docker compose services"
    },
    {
      "label": "dev:reset",
      "type": "shell",
      "command": "rm -rf frontend/node_modules/.lockfile-hash backend/.gomod-hash pb_data tmp && echo 'Caches cleared. Run dev:up to reinstall.'",
      "group": "none",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": [],
      "detail": "Clear caches and force reinstall on next start"
    },
    {
      "label": "test",
      "type": "shell",
      "command": "make test",
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": ["$go"],
      "detail": "Run all tests"
    },
    {
      "label": "test:backend",
      "type": "shell",
      "command": "cd backend && go test -v ./...",
      "group": "test",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": ["$go"],
      "detail": "Run backend Go tests"
    },
    {
      "label": "lint",
      "type": "shell",
      "command": "make lint",
      "group": "none",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": ["$go", "$eslint-stylish"],
      "detail": "Run linters on all code"
    },
    {
      "label": "build:docker",
      "type": "shell",
      "command": "docker build -t me-yaml:latest -f docker/Dockerfile .",
      "group": "build",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": [],
      "detail": "Build production Docker image"
    }
  ]
}
